<script src="./map, filter, reduce.js"></script>

<script>
	const products = [
		{ name: '반팔티', price: 15000 },
		{ name: '긴팔티', price: 20000 },
		{ name: '핸드폰케이스', price: 15000 },
		{ name: '후드티', price: 30000 },
		{ name: '바지', price: 25000 },
	];

	// 가격이 20000원 미만인 상품들의 가격을 합산한다.
	const add = (a, b) => a + b;
	log(
		reduce(
			add,
			map(
				(p) => p.price,
				filter((p) => p.price < 20000, products)
			)
		)
	);
</script>

<!-- # 코드를 값으로 다루어 표현력 높이기 -->
<!-- ## go, pipe -->
<script>
	// reduce를 이용해서 인자로 넘긴 함수를 계속 취해준다.
	const go = (...args) => reduce((a, f) => f(a), args);
	go(
		0,
		(a) => a + 1,
		(a) => a + 10,
		(a) => a + 100,
		log
	); // 111

	// 파이프는 go 함수를 이용해 함수를 리턴하는 함수이다.
	const pipe =
		(f, ...fs) =>
		(...as) =>
			go(f(...as), ...fs);
	const f = pipe(
		(a) => a + 1,
		(a) => a + 10,
		(a) => a + 100
	);
	log(f(0, 1));
</script>

<!-- go를 사용하여 읽기 좋은 코드로 만들기 -->
<script>
	// 위에서부터 아래로 의도를 쉽게 읽을 수 있게 되었다.
	go(
		products,
		(products) => filter((p) => p.price < 20000, products),
		(products) => map((p) => p.price, products),
		(prices) => reduce(add, prices),
		log
	);
</script>
